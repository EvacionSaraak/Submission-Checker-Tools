<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Unified Checker</title>
  
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="tables.css" />
  <link rel="stylesheet" href="unified_checker.css" />
</head>
<body>
  <div class="container-fluid py-4">
    <h2 class="mb-4">Unified Checker Tool</h2>
    
    <div class="alert alert-info" role="alert">
      <strong>What this tool does:</strong>
      <p class="mb-0">
        This unified interface allows you to run multiple checker validations using shared file inputs. 
        Upload the required files below, then click on any checker button to run that specific validation. 
        The results will be displayed in the table below.
      </p>
    </div>

    <!-- File Inputs Section -->
    <div class="card mb-4">
      <div class="card-header bg-primary text-white">
        <h5 class="mb-0">File Inputs</h5>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-6">
            <div class="file-input-group">
              <label for="xmlFileInput" class="form-label">Claim (XML):</label>
              <div class="input-group">
                <input type="file" class="form-control" id="xmlFileInput" accept=".xml" />
                <span class="input-group-text file-status" id="xmlStatus"></span>
              </div>
            </div>
            
            <div class="file-input-group">
              <label class="form-label">Claim Type (for Timings checker):</label>
              <div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="claimTypeGlobal" id="claimTypeDental" value="DENTAL" checked>
                  <label class="form-check-label" for="claimTypeDental">
                    Dental
                  </label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="claimTypeGlobal" id="claimTypeMedical" value="MEDICAL">
                  <label class="form-check-label" for="claimTypeMedical">
                    Medical
                  </label>
                </div>
              </div>
            </div>
            
            <div class="file-input-group">
              <label for="eligibilityFileInput" class="form-label">Elig (XLSX):</label>
              <div class="input-group">
                <input type="file" class="form-control" id="eligibilityFileInput" accept=".xlsx" />
                <span class="input-group-text file-status" id="eligibilityStatus"></span>
              </div>
            </div>
            
            <div class="file-input-group">
              <label for="authFileInput" class="form-label">Auth (XLSX):</label>
              <div class="input-group">
                <input type="file" class="form-control" id="authFileInput" accept=".xlsx" />
                <span class="input-group-text file-status" id="authStatus"></span>
              </div>
            </div>
          </div>
          
          <div class="col-md-6">
            <div class="file-input-group">
              <label for="pricingFileInput" class="form-label">Pricing (XLSX):</label>
              <div class="input-group">
                <input type="file" class="form-control" id="pricingFileInput" accept=".xlsx" />
                <span class="input-group-text file-status" id="pricingStatus"></span>
              </div>
            </div>
            
            <div class="file-input-group">
              <label for="clinicianFileInput" class="form-label">Clinician (XLSX):</label>
              <div class="input-group">
                <input type="file" class="form-control" id="clinicianFileInput" accept=".xlsx" />
                <span class="input-group-text file-status" id="clinicianStatus"></span>
              </div>
            </div>
            
            <div class="file-input-group">
              <label for="statusFileInput" class="form-label">License Status (XLSX):</label>
              <div class="input-group">
                <input type="file" class="form-control" id="statusFileInput" accept=".xlsx" />
                <span class="input-group-text file-status" id="statusStatus"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Checker Buttons -->
    <div class="card mb-4">
      <div class="card-header bg-secondary text-white">
        <h5 class="mb-0">Run Checkers</h5>
      </div>
      <div class="card-body">
        <div class="btn-group checker-buttons" role="group" aria-label="Checker buttons">
          <button type="button" class="btn btn-outline-primary" id="btn-clinician" title="Requires: XML, Clinician List, License Status" disabled>
            Clinicians
          </button>
          <button type="button" class="btn btn-outline-primary" id="btn-elig" title="Requires: XML, Eligibility" disabled>
            Eligibility
          </button>
          <button type="button" class="btn btn-outline-primary" id="btn-auths" title="Requires: XML, Authorization Export" disabled>
            Authorizations
          </button>
          <button type="button" class="btn btn-outline-primary" id="btn-timings" title="Requires: XML" disabled>
            Timings
          </button>
          <button type="button" class="btn btn-outline-primary" id="btn-teeth" title="Requires: XML" disabled>
            Teeth
          </button>
          <button type="button" class="btn btn-outline-primary" id="btn-schema" title="Requires: XML" disabled>
            Schema
          </button>
          <button type="button" class="btn btn-outline-primary" id="btn-pricing" title="Requires: XML, Pricing" disabled>
            Pricing
          </button>
          <button type="button" class="btn btn-outline-primary" id="btn-modifiers" title="Requires: XML, Eligibility" disabled>
            Modifiers
          </button>
          <button type="button" class="btn btn-warning" id="btn-check-all" title="Runs all available checkers" disabled>
            Check All<span class="experimental-badge">EXP</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Filter and Export Options -->
    <div class="card mb-4">
      <div class="card-body">
        <div class="row align-items-center">
          <div class="col-md-6">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="filterInvalid" />
              <label class="form-check-label" for="filterInvalid">
                Show only files with invalid fields
              </label>
            </div>
          </div>
          <div class="col-md-6 text-end">
            <button class="btn btn-success" id="exportBtn" disabled>
              <i class="bi bi-download"></i> Export Results
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Status Message -->
    <div id="uploadStatus" aria-live="polite"></div>

    <!-- Results Container -->
    <div id="results-container"></div>
  </div>

  <!-- Include required libraries -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="table_clipboard.js"></script>
  
  <!-- Main unified controller -->
  <script src="unified_checker.js"></script>
</body>
</html>
